
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.basedpyright.com/dev/usage/typed-libraries/">
      
      
        <link rel="prev" href="../type-stubs/">
      
      
        <link rel="next" href="../../development/build-debug/">
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.37">
    
    
      
        <title>Typed libraries - basedpyright</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#typing-guidance-for-python-libraries" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="basedpyright" class="md-header__button md-logo" aria-label="basedpyright" data-md-component="logo">
      
  <img src="../../img/logo_black.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            basedpyright
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Typed libraries
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/detachhead/basedpyright" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    detachhead/basedpyright
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="basedpyright" class="md-nav__button md-logo" aria-label="basedpyright" data-md-component="logo">
      
  <img src="../../img/logo_black.png" alt="logo">

    </a>
    basedpyright
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/detachhead/basedpyright" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    detachhead/basedpyright
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Benefits over pyright
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Benefits over pyright
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benefits-over-pyright/baseline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    baseline (beta)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benefits-over-pyright/better-defaults/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    better defaults
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benefits-over-pyright/errors-on-invalid-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    errors on invalid configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benefits-over-pyright/fixes-for-rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fixes for the reportRedeclaration and reportDuplicateImport rules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benefits-over-pyright/improved-ci-integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    improved integration with CI platforms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benefits-over-pyright/improved-translations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    improved translations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benefits-over-pyright/inline-typed-dict/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    inline TypedDict support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benefits-over-pyright/new-diagnostic-rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    new diagnostic rules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benefits-over-pyright/pylance-features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pylance features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benefits-over-pyright/pypi-package-vscode-pinning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pypi package and version pinning
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/command-line-and-language-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command-line &amp; language server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/ides/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IDEs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/pre-commit%20hook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pre-commit hook
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/command-line/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command line
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/comments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/config-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Config files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/language-server-settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Language Server Settings
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/type-concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type concepts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Usage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../builtins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Builtins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VS Code Commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../import-resolution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Import resolution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../import-statements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Import statements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mypy-comparison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mypy comparison
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type-concepts-advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type concepts advanced
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type-inference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type inference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type-stubs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type stubs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Typed libraries
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Typed libraries
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#typing-guidance-for-python-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Typing Guidance for Python Libraries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Typing Guidance for Python Libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inlined-type-annotations-and-type-stubs" class="md-nav__link">
    <span class="md-ellipsis">
      Inlined Type Annotations and Type Stubs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#library-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Library Interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-completeness" class="md-nav__link">
    <span class="md-ellipsis">
      Type Completeness
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Type Completeness">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ambiguous-types" class="md-nav__link">
    <span class="md-ellipsis">
      Ambiguous Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-of-known-ambiguous-and-unknown-types" class="md-nav__link">
    <span class="md-ellipsis">
      Examples of known, ambiguous and unknown types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-type-completeness" class="md-nav__link">
    <span class="md-ellipsis">
      Verifying Type Completeness
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Verifying Type Completeness">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#improving-type-completeness" class="md-nav__link">
    <span class="md-ellipsis">
      Improving Type Completeness
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices-for-inlined-types" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices for Inlined Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices for Inlined Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wide-vs-narrow-types" class="md-nav__link">
    <span class="md-ellipsis">
      Wide vs. Narrow Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overloads" class="md-nav__link">
    <span class="md-ellipsis">
      Overloads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keyword-only-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Keyword-only Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#positional-only-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Positional-only Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotating-decorators" class="md-nav__link">
    <span class="md-ellipsis">
      Annotating Decorators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Annotating Decorators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generic-classes-and-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Generic Classes and Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Type Aliases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abstract-classes-and-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract Classes and Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-classes-and-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Final Classes and Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#literals" class="md-nav__link">
    <span class="md-ellipsis">
      Literals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constants" class="md-nav__link">
    <span class="md-ellipsis">
      Constants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typed-dictionaries-data-classes-and-named-tuples" class="md-nav__link">
    <span class="md-ellipsis">
      Typed Dictionaries, Data Classes, and Named Tuples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compatibility-with-older-python-versions" class="md-nav__link">
    <span class="md-ellipsis">
      Compatibility with Older Python Versions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compatibility with Older Python Versions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quoted-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      Quoted Annotations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-comment-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      Type Comment Annotations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Type Comment Annotations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#typing_extensions" class="md-nav__link">
    <span class="md-ellipsis">
      typing_extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type_checking" class="md-nav__link">
    <span class="md-ellipsis">
      TYPE_CHECKING
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-standard-type-behaviors" class="md-nav__link">
    <span class="md-ellipsis">
      Non-Standard Type Behaviors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docstrings" class="md-nav__link">
    <span class="md-ellipsis">
      Docstrings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/build-debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    building &amp; debugging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/internals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pyright Internals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/localization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Localization notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/upstream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    how we keep up-to-date with upstream
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shoutouts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shoutouts
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#typing-guidance-for-python-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Typing Guidance for Python Libraries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Typing Guidance for Python Libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inlined-type-annotations-and-type-stubs" class="md-nav__link">
    <span class="md-ellipsis">
      Inlined Type Annotations and Type Stubs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#library-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Library Interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-completeness" class="md-nav__link">
    <span class="md-ellipsis">
      Type Completeness
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Type Completeness">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ambiguous-types" class="md-nav__link">
    <span class="md-ellipsis">
      Ambiguous Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-of-known-ambiguous-and-unknown-types" class="md-nav__link">
    <span class="md-ellipsis">
      Examples of known, ambiguous and unknown types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-type-completeness" class="md-nav__link">
    <span class="md-ellipsis">
      Verifying Type Completeness
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Verifying Type Completeness">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#improving-type-completeness" class="md-nav__link">
    <span class="md-ellipsis">
      Improving Type Completeness
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices-for-inlined-types" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices for Inlined Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices for Inlined Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wide-vs-narrow-types" class="md-nav__link">
    <span class="md-ellipsis">
      Wide vs. Narrow Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overloads" class="md-nav__link">
    <span class="md-ellipsis">
      Overloads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keyword-only-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Keyword-only Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#positional-only-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Positional-only Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotating-decorators" class="md-nav__link">
    <span class="md-ellipsis">
      Annotating Decorators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Annotating Decorators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generic-classes-and-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Generic Classes and Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Type Aliases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abstract-classes-and-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract Classes and Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-classes-and-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Final Classes and Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#literals" class="md-nav__link">
    <span class="md-ellipsis">
      Literals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constants" class="md-nav__link">
    <span class="md-ellipsis">
      Constants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typed-dictionaries-data-classes-and-named-tuples" class="md-nav__link">
    <span class="md-ellipsis">
      Typed Dictionaries, Data Classes, and Named Tuples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compatibility-with-older-python-versions" class="md-nav__link">
    <span class="md-ellipsis">
      Compatibility with Older Python Versions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compatibility with Older Python Versions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quoted-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      Quoted Annotations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-comment-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      Type Comment Annotations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Type Comment Annotations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#typing_extensions" class="md-nav__link">
    <span class="md-ellipsis">
      typing_extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type_checking" class="md-nav__link">
    <span class="md-ellipsis">
      TYPE_CHECKING
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-standard-type-behaviors" class="md-nav__link">
    <span class="md-ellipsis">
      Non-Standard Type Behaviors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docstrings" class="md-nav__link">
    <span class="md-ellipsis">
      Docstrings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Typed libraries</h1>

<h2 id="typing-guidance-for-python-libraries">Typing Guidance for Python Libraries</h2>
<p>Much of Python’s popularity can be attributed to the rich collection of Python libraries available to developers. Authors of these libraries play an important role in improving the experience for Python developers. This document provides some recommendations and guidance for Python library authors.</p>
<p>These recommendations are intended to provide the following benefits:</p>
<ol>
<li>Consumers of libraries should have a great coding experience with fast and accurate completion suggestions, class and function documentation, signature help (including parameter default values), hover text, and auto-imports. This should happen by default without needing to download extra packages and without any special configuration. These features should be consistent across the Python ecosystem regardless of a developer’s choice of editor, IDE, notebook environment, etc.</li>
<li>Consumers of libraries should be able to rely on complete and accurate type information so static type checkers can detect and report type inconsistencies and other violations of the interface contract.</li>
<li>Library authors should be able to specify a well-defined interface contract that is enforced by tools. This allows a library implementation to evolve and improve without breaking consumers of the library.</li>
<li>Library authors should have the benefits of static type checking to produce high-quality, bug-free implementations.</li>
</ol>
<h3 id="inlined-type-annotations-and-type-stubs">Inlined Type Annotations and Type Stubs</h3>
<p><a href="https://www.python.org/dev/peps/pep-0561/">PEP 561</a> documents several ways type information can be delivered for a library: inlined type annotations, type stub files included in the package, a separate companion type stub package, and type stubs in the typeshed repository. Some of these options fall short on delivering the benefits above. We therefore provide the following more specific guidance to library authors.</p>
<p>All libraries should include inlined type annotations for the functions, classes, methods, and constants that comprise the public interface for the library.</p>
<p>Inlined type annotations should be included directly within the source code that ships with the package. Of the options listed in PEP 561, inlined type annotations offer the most benefits. They typically require the least effort to add and maintain, they are always consistent with the implementation, and docstrings and default parameter values are readily available, allowing language servers to enhance the development experience.</p>
<p>There are cases where inlined type annotations are not possible — most notably when a library’s exposed functionality is implemented in a language other than Python. Libraries that expose symbols implemented in languages other than Python should include stub (“.pyi”) files that describe the types for those symbols. These stubs should also contain docstrings and default parameter values.</p>
<p>In many existing type stubs (such as those found in typeshed), default parameter values are replaced with with “...” and all docstrings are removed. We recommend that default values and docstrings remain within the type stub file so language servers can display this information to developers.</p>
<h3 id="library-interface">Library Interface</h3>
<p><a href="https://www.python.org/dev/peps/pep-0561/">PEP 561</a> indicates that a “py.typed” marker file must be included in the package if the author wishes to support type checking of their code.</p>
<p>If a “py.typed” module is present, a type checker will treat all modules within that package (i.e. all files that end in “.py” or “.pyi”) as importable unless the module is marked private. There are two ways to mark a module private: (1) the module's filename begins with an underscore; (2) the module is inside a sub-package marked private. For example:</p>
<ul>
<li>foo._bar (_bar is private)</li>
<li>foo._bar.baz (_bar and baz are private)</li>
<li>foo._bar.baz.bop (_bar, baz, and bop are private)</li>
</ul>
<p>Each module exposes a set of symbols. Some of these symbols are considered “private” — implementation details that are not part of the library’s interface. Type checkers like pyright use the following rules to determine which symbols are visible outside of the package.</p>
<ul>
<li>Symbols whose names begin with an underscore (but are not dunder names) are considered private.</li>
<li>Imported symbols are considered private by default. If they use the “import A as A” (a redundant module alias), “from X import A as A” (a redundant symbol alias), or “from . import A” forms, symbol “A” is not private unless the name begins with an underscore. If a file <code>__init__.py</code> uses the form “from .A import X”, symbol “A” is not private unless the name begins with an underscore (but “X” is still private). If a wildcard import (of the form “from X import *”) is used, all symbols referenced by the wildcard are not private.</li>
<li>A module can expose an <code>__all__</code> symbol at the module level that provides a list of names that are considered part of the interface. The <code>__all__</code> symbol indicates which symbols are included in a wildcard import. All symbols included in the <code>__all__</code> list are considered public even if the other rules above would otherwise indicate that they were private. For example, this allows symbols whose names begin with an underscore to be included in the interface.</li>
<li>Local variables within a function (including nested functions) are always considered private.</li>
</ul>
<p>The following idioms are supported for defining the values contained within <code>__all__</code>. These restrictions allow type checkers to statically determine the value of <code>__all__</code>.</p>
<ul>
<li><code>__all__ = ('a', 'b')</code></li>
<li><code>__all__ = ['a', 'b']</code></li>
<li><code>__all__ += ['a', 'b']</code></li>
<li><code>__all__ += submodule.__all__</code></li>
<li><code>__all__.extend(['a', 'b'])</code></li>
<li><code>__all__.extend(submodule.__all__)</code></li>
<li><code>__all__.append('a')</code></li>
<li><code>__all__.remove('a')</code></li>
</ul>
<h3 id="type-completeness">Type Completeness</h3>
<p>A “py.typed” library is said to be “type complete” if all of the symbols that comprise its interface have type annotations that refer to types that are fully known. Private symbols are exempt.</p>
<p>A “known type” is defined as follows:</p>
<p>Classes:</p>
<ul>
<li>All class variables, instance variables, and methods that are “visible” (not overridden) are annotated and refer to known types</li>
<li>If a class is a subclass of a generic class, type arguments are provided for each generic type parameter, and these type arguments are known types</li>
</ul>
<p>Functions and Methods:</p>
<ul>
<li>All input parameters have type annotations that refer to known types</li>
<li>The return parameter is annotated and refers to a known type</li>
<li>The result of applying one or more decorators results in a known type</li>
</ul>
<p>Type Aliases:</p>
<ul>
<li>All of the types referenced by the type alias are known</li>
</ul>
<p>Variables:</p>
<ul>
<li>All variables have type annotations that refer to known types</li>
</ul>
<p>Type annotations can be omitted in a few specific cases where the type is obvious from the context:</p>
<ul>
<li>Constants that are assigned simple literal values (e.g. <code>RED = '#F00'</code> or <code>MAX_TIMEOUT = 50</code> or <code>room_temperature: Final = 20</code>). A constant is a symbol that is assigned only once and is either annotated with <code>Final</code> or is named in all-caps. A constant that is not assigned a simple literal value requires explicit annotations, preferably with a <code>Final</code> annotation (e.g. <code>WOODWINDS: Final[list[str]] = ['Oboe', 'Bassoon']</code>).</li>
<li>Enum values within an Enum class do not require annotations because they take on the type of the Enum class.</li>
<li>Type aliases do not require annotations. A type alias is a symbol that is defined at a module level with a single assignment where the assigned value is an instantiable type, as opposed to a class instance (e.g. <code>Foo = Callable[[Literal["a", "b"]], int | str]</code> or <code>Bar = MyGenericClass[int] | None</code>).</li>
<li>The “self” parameter in an instance method and the “cls” parameter in a class method do not require an explicit annotation.</li>
<li>The return type for an <code>__init__</code> method does not need to be specified, since it is always <code>None</code>.</li>
<li>The following module-level symbols do not require type annotations: <code>__all__</code>,<code>__author__</code>, <code>__copyright__</code>, <code>__email__</code>, <code>__license__</code>, <code>__title__</code>, <code>__uri__</code>, <code>__version__</code>.</li>
<li>The following class-level symbols do not require type annotations: <code>__class__</code>, <code>__dict__</code>, <code>__doc__</code>, <code>__module__</code>, <code>__slots__</code>.</li>
<li>A variable is assigned in only one location using a simple assignment expression and the right-hand side of the assignment is a literal value (e.g. <code>1</code>, <code>3.14</code>, <code>"hi"</code>, or <code>MyEnum.Value</code>) or an identifier that has a known type that doesn't depend on type narrowing logic.</li>
</ul>
<h4 id="ambiguous-types">Ambiguous Types</h4>
<p>When a symbol is missing a type annotation, a type checker may be able to infer its type based on contextual information. However, type inference rules are not standardized and differ between type checkers. A symbol is said to have an “ambiguous type” if its type may be inferred differently between different Python type checkers. This can lead to a bad experience for consumers of the library.</p>
<p>Ambiguous types can be avoided by providing explicit type annotations.</p>
<h4 id="examples-of-known-ambiguous-and-unknown-types">Examples of known, ambiguous and unknown types</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Variable with known type (unambiguous because it uses a literal assignment)</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>

<span class="c1"># Variable with ambiguous type</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1"># Variable with known (declared) type</span>
<span class="n">a</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1"># Type alias with partially unknown type (because type</span>
<span class="c1"># arguments are missing for list and dict)</span>
<span class="n">DictOrList</span> <span class="o">=</span> <span class="nb">list</span> <span class="o">|</span> <span class="nb">dict</span>

<span class="c1"># Type alias with known type</span>
<span class="n">DictOrList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>

<span class="c1"># Generic type alias with known type</span>
<span class="n">_T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;_T&quot;</span><span class="p">)</span>
<span class="n">DictOrList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">[</span><span class="n">_T</span><span class="p">]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">_T</span><span class="p">]</span>

<span class="c1"># Function with known type</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># Function with partially unknown type (because type annotations</span>
<span class="c1"># are missing for input parameters and return type)</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c1"># Function with partially unknown type (because of missing</span>
<span class="c1"># type args on dict)</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># Function with partially unknown type (because return type</span>
<span class="c1"># annotation is missing)</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]):</span>
    <span class="k">pass</span>

<span class="c1"># Decorator with partially unknown type (because type annotations</span>
<span class="c1"># are missing for input parameters and return type)</span>
<span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">func</span>

<span class="c1"># Function with partially unknown type (because type is obscured</span>
<span class="c1"># by untyped decorator)</span>
<span class="nd">@my_decorator</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="c1"># Class with known type</span>
<span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">age</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="o">...</span>

<span class="c1"># Class with partially unknown type</span>
<span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="c1"># Missing type annotation for class variable</span>
    <span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Missing input parameter annotations</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="c1"># Missing type annotation for instance variable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>

    <span class="c1"># Missing return type annotation</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c1"># Class with partially unknown type</span>
<span class="k">class</span> <span class="nc">BaseClass1</span><span class="p">:</span>
    <span class="c1"># Missing type annotation</span>
    <span class="n">height</span><span class="p">:</span> <span class="o">=</span> <span class="mf">2.0</span>

    <span class="c1"># Missing type annotation</span>
    <span class="k">def</span> <span class="nf">get_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c1"># Class with known type (because it overrides all symbols</span>
<span class="c1"># exposed by BaseClass that have incomplete types)</span>
<span class="k">class</span> <span class="nc">DerivedClass1</span><span class="p">(</span><span class="n">BaseClass1</span><span class="p">):</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">float</span>

    <span class="k">def</span> <span class="nf">get_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="o">...</span>

<span class="c1"># Class with known type</span>
<span class="k">class</span> <span class="nc">BaseClass2</span><span class="p">:</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span>

<span class="c1"># Class with ambiguous type</span>
<span class="k">class</span> <span class="nc">DerivedClass2</span><span class="p">(</span><span class="n">BaseClass2</span><span class="p">):</span>
    <span class="c1"># Missing type annotation, could be inferred as float or int</span>
    <span class="n">height</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># Class with partially unknown type because base class</span>
<span class="c1"># (dict) is generic, and type arguments are not specified.</span>
<span class="k">class</span> <span class="nc">DictSubclass</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>
<h3 id="verifying-type-completeness">Verifying Type Completeness</h3>
<p>Pyright provides a feature that allows library authors to verify type completeness for a “py.typed” package. To use this feature, create a clean Python environment and install your package along with all of the other dependent packages. Run the CLI version of pyright with the <code>--verifytypes</code> option.</p>
<p><code>pyright --verifytypes &lt;lib&gt;</code></p>
<p>Pyright will analyze the library, identify all symbols that comprise the interface to the library and emit errors for any symbols whose types are ambiguous or unknown. It also produces a “type completeness score” which is the percentage of symbols with known types.</p>
<p>To see additional details (including a full list of symbols in the library), append the <code>--verbose</code> option.</p>
<p>The <code>--verifytypes</code> option can be combined with <code>--outputjson</code> to emit the results in a form that can be consumed by other tools.</p>
<p>The <code>--verifytypes</code> feature can be integrated into a continuous integration (CI) system to verify that a library remains “type complete”.</p>
<p>If the <code>--verifytypes</code> option is combined with <code>--ignoreexternal</code>, any incomplete types that are imported from other external packages are ignored. This allows library authors to focus on adding type annotations for the code that is directly under their control.</p>
<h4 id="improving-type-completeness">Improving Type Completeness</h4>
<p>Here are some tips for increasing the type completeness score for your library:</p>
<ul>
<li>If your package includes tests or sample code, consider removing them from the distribution. If there is good reason to include them, consider placing them in a directory that begins with an underscore so they are not considered part of your library’s interface.</li>
<li>If your package includes submodules that are meant to be implementation details, rename those files to begin with an underscore.</li>
<li>If a symbol is not intended to be part of the library’s interface and is considered an implementation detail, rename it such that it begins with an underscore. It will then be considered private and excluded from the type completeness check.</li>
<li>If your package exposes types from other libraries, work with the maintainers of these other libraries to achieve type completeness.</li>
</ul>
<h3 id="best-practices-for-inlined-types">Best Practices for Inlined Types</h3>
<h4 id="wide-vs-narrow-types">Wide vs. Narrow Types</h4>
<p>In type theory, when comparing two types that are related to each other, the “wider” type is the one that is more general, and the “narrower” type is more specific. For example, <code>Sequence[str]</code> is a wider type than <code>list[str]</code> because all <code>list</code> objects are also <code>Sequence</code> objects, but the converse is not true. A subclass is narrower than a class it derives from. A union of types is wider than the individual types that comprise the union.</p>
<p>In general, a function input parameter should be annotated with the widest possible type supported by the implementation. For example, if the implementation requires the caller to provide an iterable collection of strings, the parameter should be annotated as <code>Iterable[str]</code>, not as <code>list[str]</code>. The latter type is narrower than necessary, so if a user attempts to pass a tuple of strings (which is supported by the implementation), a type checker will complain about a type incompatibility.</p>
<p>As a specific application of the “use the widest type possible” rule, libraries should generally use immutable forms of container types instead of mutable forms (unless the function needs to modify the container). Use <code>Sequence</code> rather than <code>list</code>, <code>Mapping</code> rather than <code>dict</code>, etc. Immutable containers allow for more flexibility because their type parameters are covariant rather than invariant. A parameter that is typed as <code>Sequence[str | int]</code> can accept a <code>list[str | int]</code>, <code>list[int]</code>, <code>Sequence[str]</code>, and a <code>Sequence[int]</code>. But a parameter typed as <code>list[str | int]</code> is much more restrictive and accepts only a <code>list[str | int]</code>.</p>
<h4 id="overloads">Overloads</h4>
<p>If a function or method can return multiple different types and those types can be determined based on the presence or types of certain parameters, use the <code>@overload</code> mechanism defined in <a href="https://www.python.org/dev/peps/pep-0484/#id45">PEP 484</a>. When overloads are used within a “.py” file, they must appear prior to the function implementation, which should not have an <code>@overload</code> decorator. </p>
<h4 id="keyword-only-parameters">Keyword-only Parameters</h4>
<p>If a function or method is intended to take parameters that are specified only by name, use the keyword-only separator ("*").</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_user</span><span class="p">(</span><span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">dob</span><span class="p">:</span> <span class="n">date</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>
<h4 id="positional-only-parameters">Positional-only Parameters</h4>
<p>If a function or method is intended to take parameters that are specified only by position, use the positional-only separator ("/") as documented in <a href="https://peps.python.org/pep-0570/">PEP 570</a>. If your library needs to run on versions of Python prior to 3.8, you can alternatively name the positional-only parameters with an identifier that begins with a double underscore.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">compare_values</span><span class="p">(</span><span class="n">value1</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">value2</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">compare_values</span><span class="p">(</span><span class="n">__value1</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">__value2</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<h3 id="annotating-decorators">Annotating Decorators</h3>
<p>Decorators modify the behavior of a class or a function. Providing annotations for decorators is straightforward if the decorator retains the original signature of the decorated function.</p>
<div class="highlight"><pre><span></span><code><span class="n">_F</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;_F&quot;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">simple_decorator</span><span class="p">(</span><span class="n">_func</span><span class="p">:</span> <span class="n">_F</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_F</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     Simple decorators are invoked without parentheses like this:</span>
<span class="sd">       @simple_decorator</span>
<span class="sd">       def my_function(): ...</span>
<span class="sd">     &quot;&quot;&quot;</span>
   <span class="o">...</span>

<span class="k">def</span> <span class="nf">complex_decorator</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">_F</span><span class="p">],</span> <span class="n">_F</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     Complex decorators are invoked with arguments like this:</span>
<span class="sd">       @complex_decorator(mode=&quot;easy&quot;)</span>
<span class="sd">       def my_function(): ...</span>
<span class="sd">     &quot;&quot;&quot;</span>
   <span class="o">...</span>
</code></pre></div>
<p>Decorators that mutate the signature of the decorated function present challenges for type annotations. The <code>ParamSpec</code> and <code>Concatenate</code> mechanisms described in <a href="https://www.python.org/dev/peps/pep-0612/">PEP 612</a> provide some help here, but these are available only in Python 3.10 and newer. More complex signature mutations may require type annotations that erase the original signature, thus blinding type checkers and other tools that provide signature assistance. As such, library authors are discouraged from creating decorators that mutate function signatures in this manner.</p>
<h4 id="generic-classes-and-functions">Generic Classes and Functions</h4>
<p>Classes and functions that can operate in a generic manner on various types should declare themselves as generic using the mechanisms described in <a href="https://www.python.org/dev/peps/pep-0484/">PEP 484</a>. This includes the use of <code>TypeVar</code> symbols. Typically, a <code>TypeVar</code> should be private to the file that declares it, and should therefore begin with an underscore.</p>
<h4 id="type-aliases">Type Aliases</h4>
<p>Type aliases are symbols that refer to other types. Generic type aliases (those that refer to unspecialized generic classes) are supported by most type checkers. Pyright also provides support for recursive type aliases.</p>
<p><a href="https://www.python.org/dev/peps/pep-0613/">PEP 613</a> provides a way to explicitly designate a symbol as a type alias using the new TypeAlias annotation.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Simple type alias</span>
<span class="n">FamilyPet</span> <span class="o">=</span> <span class="n">Cat</span> <span class="o">|</span> <span class="n">Dog</span> <span class="o">|</span> <span class="n">GoldFish</span>

<span class="c1"># Generic type alias</span>
<span class="n">ListOrTuple</span> <span class="o">=</span> <span class="nb">list</span><span class="p">[</span><span class="n">_T</span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">_T</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>

<span class="c1"># Recursive type alias</span>
<span class="n">TreeNode</span> <span class="o">=</span> <span class="n">LeafNode</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="s2">&quot;TreeNode&quot;</span><span class="p">]</span>

<span class="c1"># Explicit type alias using PEP 613 syntax</span>
<span class="n">StrOrInt</span><span class="p">:</span> <span class="n">TypeAlias</span> <span class="o">=</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span>
</code></pre></div>
<h4 id="abstract-classes-and-methods">Abstract Classes and Methods</h4>
<p>Classes that must be subclassed should derive from <code>ABC</code>, and methods or properties that must be overridden should be decorated with the <code>@abstractmethod</code> decorator. This allows type checkers to validate that the required methods have been overridden and provide developers with useful error messages when they are not. It is customary to implement an abstract method by raising a <code>NotImplementedError</code> exception or subclass thereof.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="k">class</span> <span class="nc">Hashable</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
   <span class="nd">@property</span>
   <span class="nd">@abstractmethod</span>
   <span class="k">def</span> <span class="nf">hash_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">      </span><span class="sd">&quot;&quot;&quot;Subclasses must override&quot;&quot;&quot;</span>
      <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

   <span class="nd">@abstractmethod</span>
   <span class="k">def</span> <span class="nf">print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">      </span><span class="sd">&quot;&quot;&quot;Subclasses must override&quot;&quot;&quot;</span>
      <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
<h4 id="final-classes-and-methods">Final Classes and Methods</h4>
<p>Classes that are not intended to be subclassed should be decorated as <code>@final</code> as described in <a href="https://www.python.org/dev/peps/pep-0591/">PEP 591</a>. The same decorator can also be used to specify methods that cannot be overridden by subclasses.</p>
<h4 id="literals">Literals</h4>
<p>Type annotations should make use of the Literal type where appropriate, as described in <a href="https://www.python.org/dev/peps/pep-0586/">PEP 586</a>. Literals allow for more type specificity than their non-literal counterparts.</p>
<h4 id="constants">Constants</h4>
<p>Constant values (those that are read-only) can be specified using the Final annotation as described in <a href="https://www.python.org/dev/peps/pep-0591/">PEP 591</a>.</p>
<p>Type checkers will also typically treat variables that are named using all upper-case characters as constants.</p>
<p>In both cases, it is OK to omit the declared type of a constant if it is assigned a literal str, int, float, bool or None value. In such cases, the type inference rules are clear and unambiguous, and adding a literal type annotation would be redundant.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># All-caps constant with inferred type</span>
<span class="n">COLOR_FORMAT_RGB</span> <span class="o">=</span> <span class="s2">&quot;rgb&quot;</span>

<span class="c1"># All-caps constant with explicit type</span>
<span class="n">COLOR_FORMAT_RGB</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rgb&quot;</span>
<span class="n">LATEST_VERSION</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="c1"># Final variable with inferred type</span>
<span class="n">ColorFormatRgb</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="s2">&quot;rgb&quot;</span>

<span class="c1"># Final variable with explicit type</span>
<span class="n">ColorFormatRgb</span><span class="p">:</span> <span class="n">Final</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;rgb&quot;</span>
<span class="n">LATEST_VERSION</span><span class="p">:</span> <span class="n">Final</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</code></pre></div>
<h4 id="typed-dictionaries-data-classes-and-named-tuples">Typed Dictionaries, Data Classes, and Named Tuples</h4>
<p>If a library runs only on newer versions of Python, it can use some of the new type-friendly classes.</p>
<p>NamedTuple (described in <a href="https://www.python.org/dev/peps/pep-0484/">PEP 484</a>) is preferred over namedtuple.</p>
<p>Data classes (described in <a href="https://www.python.org/dev/peps/pep-0557/">PEP 557</a>) are preferred over untyped dictionaries.</p>
<p>TypedDict (described in <a href="https://www.python.org/dev/peps/pep-0589/">PEP 589</a>) is preferred over untyped dictionaries.</p>
<h3 id="compatibility-with-older-python-versions">Compatibility with Older Python Versions</h3>
<p>Each new version of Python from 3.5 onward has introduced new typing constructs. This presents a challenge for library authors who want to maintain runtime compatibility with older versions of Python. This section documents several techniques that can be used to add types while maintaining backward compatibility.</p>
<h4 id="quoted-annotations">Quoted Annotations</h4>
<p>Type annotations for variables, parameters, and return types can be placed in quotes. The Python interpreter will then ignore them, whereas a type checker will interpret them as type annotations.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Older versions of Python do not support subscripting</span>
<span class="c1"># for the OrderedDict type, so the annotation must be</span>
<span class="c1"># enclosed in quotes.</span>
<span class="k">def</span> <span class="nf">get_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;OrderedDict[str, str]&quot;</span><span class="p">:</span>
   <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>
</code></pre></div>
<h3 id="type-comment-annotations">Type Comment Annotations</h3>
<p>Python 3.0 introduced syntax for parameter and return type annotations, as specified in <a href="https://www.python.org/dev/peps/pep-0484/">PEP 484</a>. Python 3.6 introduced support for variable type annotations, as specified in <a href="https://www.python.org/dev/peps/pep-0526/">PEP 526</a>.</p>
<p>If you need to support older versions of Python, type annotations can still be provided as “type comments”. These comments take the form <code># type: &lt;annotation&gt;</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
   <span class="c1"># Variable type comments go at the end of the line</span>
   <span class="c1"># where the variable is assigned.</span>
   <span class="n">timeout</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># type: int | None</span>

   <span class="c1"># Function type comments can be specified on the</span>
   <span class="c1"># line after the function signature.</span>
   <span class="k">def</span> <span class="nf">send_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
      <span class="c1"># type: (str, int) -&gt; None</span>
      <span class="o">...</span>

   <span class="c1"># Function type comments can also specify the type</span>
   <span class="c1"># of each parameter on its own line.</span>
   <span class="k">def</span> <span class="nf">receive_message</span><span class="p">(</span>
      <span class="bp">self</span><span class="p">,</span>
      <span class="n">name</span><span class="p">,</span> <span class="c1"># type: str</span>
      <span class="n">length</span> <span class="c1"># type: int</span>
   <span class="p">):</span>
      <span class="c1"># type: () -&gt; Message</span>
      <span class="o">...</span>
</code></pre></div>
<h4 id="typing_extensions">typing_extensions</h4>
<p>New type features that require runtime support are typically included in the stdlib <code>typing</code> module. Where possible, these new features are back-ported to a runtime library called <code>typing_extensions</code> that works with older Python runtimes.</p>
<h4 id="type_checking">TYPE_CHECKING</h4>
<p>The <code>typing</code> module exposes a variable called <code>TYPE_CHECKING</code> which has a value of False within the Python runtime but a value of True when the type checker is performing its analysis. This allows type checking statements to be conditionalized.</p>
<p>Care should be taken when using <code>TYPE_CHECKING</code> because behavioral changes between type checking and runtime could mask problems that the type checker would otherwise catch.</p>
<h3 id="non-standard-type-behaviors">Non-Standard Type Behaviors</h3>
<p>Type annotations provide a way to annotate typical type behaviors, but some classes implement specialized, non-standard behaviors that cannot be described using standard type annotations. For now, such types need to be annotated as Any, which is unfortunate because the benefits of static typing are lost.</p>
<h3 id="docstrings">Docstrings</h3>
<p>It is recommended that docstrings be provided for all classes, functions, and methods in the interface. They should be formatted according to <a href="https://www.python.org/dev/peps/pep-0257/">PEP 257</a>.</p>
<p>There is currently no single agreed-upon standard for function and method docstrings, but several common variants have emerged. We recommend using one of these variants.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d6f25eb3.min.js"></script>
      
    
  </body>
</html>